# –°–µ—Ä–≤–µ—Ä –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è 1C —Å PostgreSQL –∏ MinIO, —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç—ã–π –≤ Docker üöÄ

## –ù–∞–≤–∏–≥–∞—Ü–∏—è

- [–û–ø–∏—Å–∞–Ω–∏–µ](#–æ–ø–∏—Å–∞–Ω–∏–µ)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏](#–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏)
- [–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è](#—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–∑–∞–ø—É—Å–∫)
- [–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏](#—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏)
- [–ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤](#–ø—Ä–æ—Å–º–æ—Ç—Ä-–ª–æ–≥–æ–≤)

## –û–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è 1C —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö PostgreSQL –∏ –æ–±—ä–µ–∫—Ç–Ω—ã–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º MinIO –≤ Docker Compose. –û–Ω –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ 1C —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ —É–ø—Ä–æ—â–µ–Ω–∏—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞–º–∏.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç —Ç—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–∞, —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã—Ö –≤ Docker:

1. **collab_server** ‚Äî —Å–µ—Ä–≤–µ—Ä –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è 1C.
2. **postgres_db** ‚Äî –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL.
3. **minio** ‚Äî –æ–±—ä–µ–∫—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ MinIO.

## –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **–°–µ—Ä–≤–µ—Ä –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è 1C**: –í–µ—Ä—Å–∏—è 26.0.53, —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –Ω–∞ Debian Bookworm.
- **PostgreSQL**: –í–µ—Ä—Å–∏—è 17.3.
- **MinIO**: –í–µ—Ä—Å–∏—è RELEASE.2025-02-28T09-55-16Z.

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

–î–ª—è —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã:
- **Docker**: –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –≤–µ—Ä—Å–∏—è 28.0.1 –∏–ª–∏ –≤—ã—à–µ. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é –∫–æ–º–∞–Ω–¥–æ–π:
  ```bash
  docker --version
  ```
- **Docker Compose**: –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –≤–µ—Ä—Å–∏—è v2.33.1 –∏–ª–∏ –≤—ã—à–µ (–ø–ª–∞–≥–∏–Ω). –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é –∫–æ–º–∞–Ω–¥–æ–π:
  ```bash
  docker compose version
  ```
  –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è Docker Compose (1.x), –∫–æ–º–∞–Ω–¥–∞ –±—É–¥–µ—Ç `docker-compose --version`.
- **–ê—Ä—Ö–∏–≤**: `1c_cs_26.0.53_linux_x86_64.tar.gz`.
- **–£—Å—Ç–∞–Ω–æ–≤–æ—á–Ω—ã–π –ø–∞–∫–µ—Ç AxiomJDK**: `axiomjdk-jre-pro11.0.25+11-linux-amd64.deb`.

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- **–°–µ—Ç—å**:
  - `internal_net`: –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Å–µ—Ç—å –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤.
  - `external_net`: –í–Ω–µ—à–Ω—è—è —Å–µ—Ç—å –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ `collab_server`.

- **–ü–æ—Ä—Ç—ã**:
  - `collab_server`: –ú–∞–ø–ø–∏–Ω–≥ –ø–æ—Ä—Ç–∞ `9090:9090` (—Ö–æ—Å—Ç:–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä).
  - `postgres_db`: –ü–æ—Ä—Ç `5432` –¥–æ—Å—Ç—É–ø–µ–Ω –≤–Ω—É—Ç—Ä–∏ —Å–µ—Ç–∏ `internal_net`.
  - `minio`: –ü–æ—Ä—Ç—ã `9000` (API) –∏ `9001` (–∫–æ–Ω—Å–æ–ª—å) –¥–æ—Å—Ç—É–ø–Ω—ã –≤–Ω—É—Ç—Ä–∏ —Å–µ—Ç–∏ `internal_net`.

- **–í—Ä–µ–º–µ–Ω–Ω–∞—è –∑–æ–Ω–∞**:
  - –í–æ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö (`collab_server`, `postgres_db`, `minio`) —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≤—Ä–µ–º–µ–Ω–Ω–∞—è –∑–æ–Ω–∞ `Europe/Moscow`.

- **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**:
  –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ `.env.example`. –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

  - **PostgreSQL**:
    - `POSTGRES_URL`: URL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `postgresql://postgres_image:5432`).
    - `POSTGRES_USER`: –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `admpostgres`).
    - `POSTGRES_PWD`: –ü–∞—Ä–æ–ª—å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `admpostgres`).
    - `POSTGRES_DB`: –ò–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `csdbdev`).

  - **MinIO**:
    - `MINIO_SERVER`: –ê–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞ MinIO (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `http://minio:9000`).
    - `MINIO_ROOT_USER`: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä MinIO (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `minioadmin`).
    - `MINIO_ROOT_PASSWORD`: –ü–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `minioadmin`).
    - `MINIO_BUCKET_NAME`: –ò–º—è –±–∞–∫–µ—Ç–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `cs-bucket`).
    - `MINIO_ACCESS_KEY_ID`: –ö–ª—é—á –¥–æ—Å—Ç—É–ø–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `f62e18ecb9476e2409a0`).
    - `MINIO_SECRET_KEY`: –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `2e263adef0a35fd37a97c45142bfa1549dd1615f`).

  **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–µ–π –¥–ª—è MinIO**:
  –í—ã –º–æ–∂–µ—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ `MINIO_ACCESS_KEY_ID` –∏ `MINIO_SECRET_KEY` —Å –ø–æ–º–æ—â—å—é OpenSSL:
  ```bash
  openssl rand -hex 10  # –î–ª—è MINIO_ACCESS_KEY_ID (20 —Å–∏–º–≤–æ–ª–æ–≤)
  openssl rand -hex 16  # –î–ª—è MINIO_SECRET_KEY (32 —Å–∏–º–≤–æ–ª–∞)
  ```
  –ó–∞–º–µ–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ `.env` –Ω–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è**:

    ```bash
    git clone <URL_—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è>
    cd <–ø–∞–ø–∫–∞_–ø—Ä–æ–µ–∫—Ç–∞>
    ```

2. **–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Ñ–∞–π–ª–æ–≤**:

    ```bash
    cp 1c_cs_26.0.53_linux_x86_64.tar.gz ./collab_serv/
    cp axiomjdk-jre-pro11.0.25+11-linux-amd64.deb ./collab_serv/
    ```

3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∞–π–ª–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è**:

    ```bash
    cp .env.example .env
    ```

    –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `.env` –∏ —É–∫–∞–∂–∏—Ç–µ —Å–≤–æ–∏ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–µ –∫–ª—é—á–∏ –¥–ª—è MinIO.

4. **–°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤**:

    ```bash
    make up_build
    ```

    –ö–æ–º–∞–Ω–¥–∞ —Å–æ–±–µ—Ä–µ—Ç Docker-–æ–±—Ä–∞–∑—ã –∏ –∑–∞–ø—É—Å—Ç–∏—Ç –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ.

5. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º**:

    - –ö —Å–µ—Ä–≤–µ—Ä—É –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è 1C:
      ```bash
      make conn_cs
      ```
    - –ö PostgreSQL:
      ```bash
      make conn_psql
      ```
    - –ö MinIO:
      ```bash
      make conn_mi
      ```

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏

1. **–û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤**:

    ```bash
    make stop
    ```

2. **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤**:

    ```bash
    make restart
    ```

3. **–û—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤**:

    ```bash
    make prune
    ```

## –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

- –õ–æ–≥–∏ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:
  ```bash
  make logs_all
  ```

- –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è 1C:
  ```bash
  make logs_cs
  ```

- –õ–æ–≥–∏ PostgreSQL:
  ```bash
  make logs_pg
  ```

- –õ–æ–≥–∏ MinIO:
  ```bash
  make logs_mi
  ```
